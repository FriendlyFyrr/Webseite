<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>.</title>
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
  <style>
    :root {
      --vh: 1vh;
    }
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: calc(var(--vh, 1vh) * 100);
      overflow: hidden;
      position: fixed;
      inset: 0;
      background: #000;
      font-family: sans-serif;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    canvas {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: calc(100% + 20%);
      height: calc(100% + 20%);
      display: block;
    }
    .overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 2rem 3rem;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 1rem;
      backdrop-filter: blur(12px) saturate(150%);
      -webkit-backdrop-filter: blur(12px) saturate(150%);
      box-shadow: 0 0 40px rgba(200, 200, 200, 0.1);
      text-align: center;
      width: max-content;
      max-width: 600px;
      max-height: calc(100vh - 4rem);
      overflow: auto;
    }
    .decrypting span {
      opacity: 0;
      animation: reveal 0.2s forwards;
    }
    .inhalt {
      text-align: left;
    }
    .personal_content {
      align-self: center;
      justify-self: center;
    }
    @keyframes reveal {
      from { opacity: 0; filter: blur(4px); }
      to { opacity: 1; filter: blur(0); }
    }
    h1 { font-size: 2rem; }
    a { color: white; text-decoration: underline; }
    p { font-size: 1.2rem; font-weight: bold; }
  </style>
</head>
<body>
  <canvas id="glCanvas"></canvas>

  <div class="overlay">
    <h1 id="title"></h1>
    <div class="personal_content">
      <p class="inhalt">Computer & Design</p>
    </div>
    <p id="email"></p>
  </div>

  <script>
    function setVh() {
      document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
    }
    window.addEventListener('resize', setVh);
    setVh();

    const canvas = document.getElementById('glCanvas');
    const gl = canvas.getContext('webgl');
    if(!gl){ alert('WebGL not supported.'); }

    const vsSource = `attribute vec2 a_position; varying vec2 v_uv; void main(){ v_uv=a_position*0.5+0.5; gl_Position=vec4(a_position,0.0,1.0);}`;
    const fsSource = `precision highp float; varying vec2 v_uv; uniform float u_time; uniform float u_threshold; uniform float u_aaStrength; uniform int u_modeCount; uniform vec4 u_modes[8]; uniform vec4 u_phases[8]; float amplitude(vec2 uv,float t){float A=0.0;for(int i=0;i<8;i++){if(i>=u_modeCount)break;vec4 mo=u_modes[i];float phase=u_phases[i].x+mo.w*t;float val=sin(mo.x*3.14159*uv.x)*sin(mo.y*3.14159*uv.y);A+=mo.z*val*cos(phase);}return A;}void main(){float t=u_time;float eps=1.0/1024.0;float A=amplitude(v_uv,t);float Ax=amplitude(v_uv+vec2(eps,0.0),t);float Ay=amplitude(v_uv+vec2(0.0,eps),t);float grad=length(vec2(Ax-A,Ay-A));float v=abs(A);float edge=v/max(grad,1e-4);float scaledThresh=u_threshold*u_aaStrength;float alpha=smoothstep(scaledThresh*0.5,scaledThresh*1.5,edge);float brightness=1.0-alpha;gl_FragColor=vec4(vec3(brightness),1.0);}`;

    function compileShader(type, src){
      const s=gl.createShader(type);
      gl.shaderSource(s,src);
      gl.compileShader(s);
      if(!gl.getShaderParameter(s,gl.COMPILE_STATUS)){
        console.error(gl.getShaderInfoLog(s));
      }
      return s;
    }
    const vs=compileShader(gl.VERTEX_SHADER,vsSource);
    const fs=compileShader(gl.FRAGMENT_SHADER,fsSource);
    const prog=gl.createProgram();
    gl.attachShader(prog,vs);
    gl.attachShader(prog,fs);
    gl.linkProgram(prog);
    gl.useProgram(prog);

    const posBuf=gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER,posBuf);
    gl.bufferData(gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),gl.STATIC_DRAW);
    const aPos=gl.getAttribLocation(prog,'a_position');
    gl.enableVertexAttribArray(aPos);
    gl.vertexAttribPointer(aPos,2,gl.FLOAT,false,0,0);

    const u_time=gl.getUniformLocation(prog,'u_time');
    const u_threshold=gl.getUniformLocation(prog,'u_threshold');
    const u_aaStrength=gl.getUniformLocation(prog,'u_aaStrength');
    const u_modeCount=gl.getUniformLocation(prog,'u_modeCount');
    const u_modes=gl.getUniformLocation(prog,'u_modes');
    const u_phases=gl.getUniformLocation(prog,'u_phases');

    const THRESHOLD=2.0,AA_STRENGTH=2.8,ANIM_SPEED=0.1,MODES=4;
    let modes=new Float32Array(32),phases=new Float32Array(32);
    function randomize(){
      const n=MODES;
      modes.fill(0);phases.fill(0);
      for(let i=0;i<n;i++){
        const m=1+Math.floor(Math.random()*8);
        const nval=1+Math.floor(Math.random()*8);
        const amp=1.0/(i+1);
        const omega=0.5+Math.random()*2.0;
        const phase=Math.random()*Math.PI*2.0;
        const base=i*4;
        modes[base]=m;
        modes[base+1]=nval;
        modes[base+2]=amp;
        modes[base+3]=omega;
        phases[base]=phase;
      }
    }
    randomize();

    function resize(){
      const dpr = window.devicePixelRatio || 1;
      const extra = 0.2;
      canvas.width = window.innerWidth * (1 + extra) * dpr;
      canvas.height = window.innerHeight * (1 + extra) * dpr;
      gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);
    }

    window.addEventListener('resize', resize);
    resize();

    let start=null;
    function draw(ts){
      if(!start) start=ts;
      const t=((ts-start)/1000.0)*ANIM_SPEED;
      gl.clear(gl.COLOR_BUFFER_BIT);
      gl.uniform1f(u_time,t);
      gl.uniform1f(u_threshold,THRESHOLD);
      gl.uniform1f(u_aaStrength,AA_STRENGTH);
      gl.uniform1i(u_modeCount,MODES);
      gl.uniform4fv(u_modes,modes);
      gl.uniform4fv(u_phases,phases);
      gl.drawArrays(gl.TRIANGLE_STRIP,0,4);
      requestAnimationFrame(draw);
    }
    requestAnimationFrame(draw);

    function visualizeBase64(element, base64String, isEmail=false){
      const decoded = atob(base64String);
      element.textContent = '';

      if (isEmail) {
        const link = document.createElement('a');
        link.href = `mailto:${decoded}`;
        link.textContent = decoded;
        link.style.color = 'white';
        link.style.textDecoration = 'underline';
        element.appendChild(link);
        return;
      }

      decoded.split('').forEach((ch,i)=>{
        const span=document.createElement('span');
        span.textContent=ch;
        span.style.animation=`reveal 0.2s forwards`;
        span.style.animationDelay=`${i*0.15}s`;
        element.appendChild(span);
      });
    }

    const encodedTitle='RnJleWEgWmllc2xlcg==';
    const encodedEmail='ZW1haWxAZnlyci5kZQ==';
    visualizeBase64(document.getElementById('title'),encodedTitle);
    visualizeBase64(document.getElementById('email'),encodedEmail,true);
  </script>
</body>
</html>
